support RAM uploads and temporary file uploads
add tests for upload functionality