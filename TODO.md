support RAM uploads and temporary file uploads